<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Subversion &mdash; documentación de Logbook - 0.1</title>
    
    <link rel="stylesheet" href="static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="documentación de Logbook - 0.1" href="index.html" />
    <link rel="next" title="Sistemas" href="system.html" />
    <link rel="prev" title="Mercurial" href="mercurial.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="subversion">
<h1>Subversion<a class="headerlink" href="#subversion" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="lo-basico">
<h2>Lo básico<a class="headerlink" href="#lo-basico" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La documentación es muy extensa pero normalmente usas <strong>sólo 6 cosas</strong>:</p>
<ul class="simple">
<li>svn co &lt;path_proyecto&gt; # te bajas el proyecto</li>
<li>svn up # dentro del directorio del proyecto, lo actualice con los cambios de tus compañeros</li>
<li>svn add &lt;fichero&gt; añade un nuevo fichero al repositorio</li>
<li>svn mv # para mover archivos o directorio</li>
<li>svn rm # para borrar archivos del repositorio</li>
<li>svn ci # dentro del directorio del proyecto, sube todos los cambios que has realizado en el proyecto al servidor central de código. Aplica tambien los archivos añadidos, borrados y movidos.</li>
</ul>
<p>Referencias:</p>
<ul class="simple">
<li><strong>Referencia de los comandos completa:</strong> <a class="reference external" href="http://svnbook.red-bean.com/nightly/es/svn-ch-9.html">http://svnbook.red-bean.com/nightly/es/svn-ch-9.html</a></li>
<li><strong>Libro subversión español</strong>: <a class="reference external" href="http://svnbook.red-bean.com/nightly/es/svn-book.html">http://svnbook.red-bean.com/nightly/es/svn-book.html</a></li>
</ul>
</div>
<div class="section" id="acciones-comunes">
<h2>Acciones comunes<a class="headerlink" href="#acciones-comunes" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="como-comparar-un-fichero-local-con-sus-modificaciones-con-la-ultima-version-en-el-repositorio">
<h3>¿Cómo comparar un fichero local (con sus modificaciones) con la última versión en el repositorio?<a class="headerlink" href="#como-comparar-un-fichero-local-con-sus-modificaciones-con-la-ultima-version-en-el-repositorio" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>svn diff --revision HEAD
</pre></div>
</div>
</div>
<div class="section" id="como-deshacer-cambios-hechos-en-el-servidor">
<h3>¿Como deshacer cambios hechos en el servidor?<a class="headerlink" href="#como-deshacer-cambios-hechos-en-el-servidor" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>svn merge -r&lt;numero_version_mala_actual&gt;:&lt;numero_version_buena_antigua&gt; &lt;archivo o directorio&gt;
svn ci &lt;archivo o directorio&gt;
</pre></div>
</div>
</div>
<div class="section" id="como-crear-una-tag">
<h3>Cómo crear una tag<a class="headerlink" href="#como-crear-una-tag" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn copy http://svn.example.com/repos/calc/trunk <span class="se">\</span>
       http://svn.example.com/repos/calc/tags/release-1.0 <span class="se">\</span>
  -m <span class="s2">&quot;Tagging the 1.0 release of the &#39;calc&#39; project.&quot;</span>

Committed revision 351.
</pre></div>
</div>
</div>
</div>
<div class="section" id="ramas">
<h2>Ramas<a class="headerlink" href="#ramas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Supongamos que queremos hacer una rama del proyecto calc.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn copy http://svn.example.com/repos/calc/trunk <span class="se">\</span>
       http://svn.example.com/repos/calc/branches/my-calc-branch <span class="se">\</span>
  -m <span class="s2">&quot;Creating a private branch of /calc/trunk.&quot;</span>
</pre></div>
</div>
<p>Tenemos dos alternativas:</p>
<ul class="simple">
<li>Usando sólo subversion.</li>
<li>Subversion + Herramienta de gestión de ramas <a class="reference external" href="http://www.orcaware.com/svn/wiki/Svnmerge.py/">svnmerge</a>. <strong>Muy recomendado</strong>.</li>
</ul>
<p>Ventajas svnmerge:</p>
<ul class="simple">
<li>Mantiene un registro de cambios fusionados.</li>
<li>Evita que se aplique dos veces el mismo cambio.</li>
<li>No tienes que buscar el último cambio fusionado para saber a partir de cual seguir.</li>
<li>Permite definir que conjunto de cambios que no quieres fusionar y lo recueda en futuros merges.</li>
<li>Genera mesajes de commits con un log de todas las cosas que se van a fusionar.</li>
</ul>
<p>Datos Supuestos:</p>
<ul class="simple">
<li>trunk: <a class="reference external" href="http://svn.example.com/repos/calc/trunk/">http://svn.example.com/repos/calc/trunk/</a></li>
<li>rama: <a class="reference external" href="http://svn.example.com/repos/calc/branches/my-calc-branch">http://svn.example.com/repos/calc/branches/my-calc-branch</a></li>
<li>Las copias locales donde se va a aplicar los cambios están actualizadas.</li>
</ul>
<p>Recomendaciones:</p>
<ul class="simple">
<li>Si tienes externals que después de una fusión va a dejar de serlo porque se han congelado, mejor borralas en donde son externals para evitar conflictos</li>
<li>Cuidado con el archivo svnmerge-commit-message.txt que genera svnmerge, ya que contiene texto &#8220;Ver #..&#8221;, &#8220;Cierra #..&#8221; y si no lo cambias te mete comentarios en los tickets.</li>
</ul>
<p>Supongamos que estamos dentro del directorio de la rama &#8220;my-calc-branch&#8221;</p>
<div class="section" id="con-ayuda-de-svnmerge">
<h3>Con ayuda de svnmerge:<a class="headerlink" href="#con-ayuda-de-svnmerge" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Inicializamos registro de cambios en la rama. Sólo se hace una vez después de crearla.</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py init
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Podemos revisar que cambios serán fusionados</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py avail               <span class="c"># show only the revision numbers</span>
<span class="nv">$ </span>svnmerge.py avail --log         <span class="c"># show logs of the revisions on the trunk available for merging</span>
<span class="nv">$ </span>svnmerge.py avail --diff        <span class="c"># show diffs of the revisions on the trunk available for merging</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Fusionamos los cambios de trunk en la rama</li>
</ol>
<p>Todos los cambios:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py merge
</pre></div>
</div>
<p>o un subconjunto:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py merge -r4500,4671,4812
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Subimos los cambios usando un archivo generado por svnmerge con el log de los mismos (borrando las últimas líneas, que podrían dar ruido en el trac):</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>svn ci -F svnmerge-commit-message.txt
</pre></div>
</div>
<p>Si se quiere se puede bloquear algunos cambios para que no se fusionen:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py block -r6456-6460,6881
</pre></div>
</div>
</div>
<div class="section" id="a-mano-solo-con-subversion">
<h3>A mano sólo con subversion:<a class="headerlink" href="#a-mano-solo-con-subversion" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Sintaxis:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn merge -r &lt;rango_de_cambios&gt; &lt;url_trunk&gt; &lt;directorio_donde_aplicar&gt;
</pre></div>
</div>
<ol class="arabic simple">
<li>Simulación del merge para ver que ficheros cambiarían:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn merge --dry-run -r 343:344 http://svn.example.com/repos/calc/trunk my-calc-branch
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Haciendo merge real:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn merge -r 343:344 http://svn.example.com/repos/calc/trunk my-calc-branch
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Subiendo los cambios:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>svn commit -m <span class="s2">&quot;portado cambio r344  desde trunk.&quot;</span>
</pre></div>
</div>
<p><strong>Nota:</strong> como subversion no tiene histórico de fusiones se recomienda indicarlo en el mensaje.</p>
<div class="section" id="fusionar-la-rama-con-el-trunk">
<h4>Fusionar la rama con el trunk<a class="headerlink" href="#fusionar-la-rama-con-el-trunk" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Supongamos que estamos dentro del directorio del trunk</p>
</div>
</div>
<div class="section" id="id1">
<h3>Con ayuda de svnmerge:<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Inicializamos registro de cambios en trunk relacionados con la rama BRANCH_URL. Sólo se ejecuta una vez.</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py init BRANCH_URL
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Aplicamos los cambios de la rama al trunk.</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py merge --bidirectional
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Para cerrar la rama si no se va a seguir desarrollando en ella:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svnmerge.py uninit -S BRANCH_URL
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>A mano sólo con subversion:<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Encontrar la versión en la que se creo la rama con &#8211;stop-on-copy</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre>svn log --verbose --stop-on-copy  http://svn.example.com/repos/calc/branches/my-calc-branch
</pre></div>
</div>
<p>Ejemplo de salida:</p>
<div class="highlight-bash"><div class="highlight"><pre>…
------------------------------------------------------------------------
r341 <span class="p">|</span> usuario <span class="p">|</span> 2002-11-03 15:27:56 -0600 <span class="o">(</span>Thu, <span class="m">07</span> Nov 2002<span class="o">)</span> <span class="p">|</span> <span class="m">2</span> lines
Changed paths:
   A /calc/branches/my-calc-branch <span class="o">(</span>from /calc/trunk:340<span class="o">)</span>
</pre></div>
</div>
<p>Vemos que se creó en la revisón 341</p>
<ol class="arabic simple" start="2">
<li>Nos dirigimos al trunk y actualizamos:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>calc/trunk
<span class="nv">$ </span>svn update
At revision 405.
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Aplicamos cambios de nuestra rama al trunk</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn merge -r 341:HEAD http://svn.example.com/repos/calc/branches/my-calc-branch
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Comprobamos los cambios</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn status
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Examinamos diffs, ejecutamos test, etc ...</li>
<li>Comiteamos los cambios con un mensaje indicando que es una fusión de una rama:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>svn commit -m <span class="s2">&quot;Merged my-calc-branch changes r341:405 into the trunk.&quot;</span>
</pre></div>
</div>
<p><strong>Nota:</strong> es muy importante especificar en el mensaje del cambio que es una fusión, para que en futuras fusiones sepamos desde que changeset debemos comenzar.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Tabla de Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">Subversion</a><ul>
<li><a class="reference internal" href="#lo-basico">Lo básico</a></li>
<li><a class="reference internal" href="#acciones-comunes">Acciones comunes</a><ul>
<li><a class="reference internal" href="#como-comparar-un-fichero-local-con-sus-modificaciones-con-la-ultima-version-en-el-repositorio">¿Cómo comparar un fichero local (con sus modificaciones) con la última versión en el repositorio?</a></li>
<li><a class="reference internal" href="#como-deshacer-cambios-hechos-en-el-servidor">¿Como deshacer cambios hechos en el servidor?</a></li>
<li><a class="reference internal" href="#como-crear-una-tag">Cómo crear una tag</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ramas">Ramas</a><ul>
<li><a class="reference internal" href="#con-ayuda-de-svnmerge">Con ayuda de svnmerge:</a></li>
<li><a class="reference internal" href="#a-mano-solo-con-subversion">A mano sólo con subversion:</a><ul>
<li><a class="reference internal" href="#fusionar-la-rama-con-el-trunk">Fusionar la rama con el trunk</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Con ayuda de svnmerge:</a></li>
<li><a class="reference internal" href="#id2">A mano sólo con subversion:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="mercurial.html" title="capítulo anterior">Mercurial</a></li>
      <li>Next: <a href="system.html" title="próximo capítulo">Sistemas</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="sources/subversion.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Introduzca los términos de búsqueda o un nombre de módulo, clase o función.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Emilio Jiménez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="sources/subversion.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>